import{u as N,a as m,j as e,H as v,L as _}from"./app-BtO6bbaj.js";import{A as C}from"./AuthenticatedLayout-CmtVOEO9.js";import{B as a}from"./button-BDdyexDr.js";import{I as z}from"./input-Be_1l4wK.js";import{L as x}from"./label-oDzHwur-.js";import{C as S,a as w,b as q,c as I}from"./card-BWLgb6Jq.js";import"./transition-DM6K7q_w.js";import"./index-BJHUWo6d.js";import"./index-iioAFgUO.js";function A({categories:u,auth:h}){const{data:p,setData:d,post:j,processing:n,errors:r,progress:t}=N({csv_file:null,default_category_id:""}),[i,f]=m.useState(""),[o,c]=m.useState([]),g=s=>{const l=s.target.files[0];l&&(d("csv_file",l),f(l.name))},b=s=>{s.preventDefault(),j(route("quizzes.import"),{onSuccess:l=>{l.props.import_errors&&c(l.props.import_errors)},onError:l=>{l.import_errors&&c(l.import_errors)}})},y=()=>{window.location.href=route("quizzes.template")};return e.jsxs(C,{user:h.user,children:[e.jsx(v,{title:"Import Quizzes"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(S,{children:[e.jsx(w,{children:e.jsx(q,{children:"Import Quizzes from CSV"})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to import quizzes:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"Download the CSV template"}),e.jsx("li",{children:"Fill in your quiz data following the template format"}),e.jsx("li",{children:"Select a default category (optional - can be specified in CSV)"}),e.jsx("li",{children:"Upload your CSV file"}),e.jsx("li",{children:'Click "Import Quizzes" to process the file'})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Step 1: Download Template"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Download our CSV template to see the required format and example data."}),e.jsx(a,{onClick:y,variant:"outline",children:"Download CSV Template"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"CSV Column Format"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"Required columns:"})}),e.jsxs("ul",{className:"list-disc list-inside ml-2 text-gray-600",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"title"})," - Quiz title"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"description"})," - Quiz description"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"category"})," - Category name (must exist in system)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"type"}),' - Either "free" or "premium"']}),e.jsxs("li",{children:[e.jsx("strong",{children:"time_limit"})," - Time in minutes (empty for no limit)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"passing_score"})," - Percentage (1-100)"]})]}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Optional columns:"})}),e.jsxs("ul",{className:"list-disc list-inside ml-2 text-gray-600",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"max_attempts"})," - Maximum attempts (empty for unlimited)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"is_active"})," - true/false (default: true)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"shuffle_questions"})," ","- true/false (default: false)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"show_correct_answers"})," ","- true/false (default: true)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"points_per_question"})," ","- Points per question (default: 1)"]})]})]})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Step 2: Upload CSV File"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"default_category",children:"Default Category (Optional)"}),e.jsxs("select",{id:"default_category",value:p.default_category_id,onChange:s=>d("default_category_id",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"No default (use CSV values)"}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If a quiz in the CSV doesn't have a category or the category doesn't exist, this category will be used."})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"csv_file",children:"CSV File *"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(z,{id:"csv_file",type:"file",accept:".csv,.txt",onChange:g,className:r.csv_file?"border-red-500":"",required:!0}),i&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",i]}),r.csv_file&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.csv_file})]})]})]})]}),t&&e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[t.percentage,"%"]})]})}),o.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Import Errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:o.map((s,l)=>e.jsx("li",{children:s},l))})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(_,{href:route("quizzes.index"),children:e.jsx(a,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(a,{type:"submit",disabled:n||!i,children:n?"Importing...":"Import Quizzes"})]})]})]})})]})})})]})}export{A as default};
