import{c as A,a as l,j as e,H as k,L as a,r as u}from"./app-BtO6bbaj.js";import{A as I}from"./AuthenticatedLayout-CmtVOEO9.js";import{B as r}from"./button-BDdyexDr.js";import{B as v}from"./badge-BAc7wY3g.js";import{C as T,a as F,b as L,c as D}from"./card-BWLgb6Jq.js";import{I as Q}from"./input-Be_1l4wK.js";import{L as d}from"./label-oDzHwur-.js";import"./transition-DM6K7q_w.js";import"./index-BJHUWo6d.js";import"./index-iioAFgUO.js";function J({quizzes:s,categories:N,filters:n={},auth:b}){const{url:H}=A(),[c,p]=l.useState(n.search||""),[o,h]=l.useState(n.category_id||""),[x,g]=l.useState(n.type||""),[m,y]=l.useState(n.status||""),w=l.useMemo(()=>({search:c||void 0,category_id:o||void 0,type:x||void 0,status:m||void 0}),[c,o,x,m]),j=t=>{t&&t.preventDefault(),u.get(route("admin.quizzes.index"),w,{preserveState:!0,replace:!0})},S=t=>{t.key==="Enter"&&j(t)},C=()=>{p(""),h(""),g(""),y(""),u.get(route("quizzes.index"),{},{replace:!0})},_=t=>{confirm("Are you sure you want to delete this quiz? This cannot be undone.")&&u.delete(route("quizzes.destroy",t),{preserveScroll:!0})},z=({links:t=[]})=>t.length?e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.map((i,f)=>i.url?e.jsx(a,{href:i.url,preserveScroll:!0,className:`px-3 py-1 text-sm rounded border ${i.active?"bg-gray-900 text-white border-gray-900":"border-gray-200 hover:bg-gray-50"}`,dangerouslySetInnerHTML:{__html:i.label}},f):e.jsx("span",{className:"px-3 py-1 text-sm rounded border border-gray-200 text-gray-400",dangerouslySetInnerHTML:{__html:i.label}},f))}):null;return e.jsxs(I,{user:b.user,children:[e.jsx(k,{title:"Quizzes"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(T,{children:[e.jsxs(F,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx(L,{className:"text-2xl",children:"Quizzes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{href:route("admin.quizzes.import.form",{}),children:e.jsx(r,{variant:"outline",children:"Import CSV"})}),e.jsx(a,{href:route("admin.quizzes.create"),children:e.jsx(r,{children:"Create New Quiz"})})]})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx(d,{htmlFor:"search",children:"Search"}),e.jsx(Q,{id:"search",placeholder:"Search by title or description...",value:c,onChange:t=>p(t.target.value),onKeyDown:S})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx(d,{htmlFor:"category_id",children:"Category"}),e.jsxs("select",{id:"category_id",value:o,onChange:t=>h(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All categories"}),N?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"type",children:"Type"}),e.jsxs("select",{id:"type",value:x,onChange:t=>g(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"premium",children:"Premium"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",value:m,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("div",{className:"md:col-span-1 flex items-end gap-2",children:e.jsx(r,{type:"submit",className:"w-full",children:"Filter"})}),e.jsx("div",{className:"md:col-span-12",children:e.jsx(r,{type:"button",variant:"outline",onClick:C,children:"Clear filters"})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Questions"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passing"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s?.data?.length?s.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.title}),t.description&&e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:t.description})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.category?.name??"—"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(v,{variant:t.type==="premium"?"default":"secondary",children:t.type})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(v,{variant:t.is_active?"default":"secondary",children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-right text-sm",children:t.total_questions??0}),e.jsxs("td",{className:"px-4 py-3 text-right text-sm",children:[t.passing_score,"%"]}),e.jsx("td",{className:"px-4 py-3 text-right text-sm",children:t.time_limit?`${t.time_limit} min`:"—"}),e.jsx("td",{className:"px-4 py-3 text-right text-sm",children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"—"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end flex-wrap gap-2",children:[e.jsx(a,{href:route("admin.quizzes.questions.index",t.id),children:e.jsx(r,{variant:"outline",size:"sm",children:"Manage Questions"})}),e.jsx(a,{href:route("admin.quizzes.questions.create",t.id),children:e.jsx(r,{size:"sm",children:"Add Question"})}),e.jsx(a,{href:route("admin.quizzes.show",t.id),children:e.jsx(r,{variant:"outline",size:"sm",children:"View"})}),e.jsx(a,{href:route("admin.quizzes.edit",t.id),children:e.jsx(r,{variant:"outline",size:"sm",children:"Edit"})}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>_(t.id),children:"Delete"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-10 text-center text-gray-500",children:"No quizzes found."})})})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:s?.from&&s?.to&&s?.total?`Showing ${s.from}-${s.to} of ${s.total}`:null}),e.jsx(z,{links:s?.links||[]})]})]})]})})})]})}export{J as default};
